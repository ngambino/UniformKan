\documentclass[reqno,10pt,a4paper,oneside]{amsart}

\setcounter{tocdepth}{1}

\usepackage{uniform-kan-prelude}

\title{On uniform Kan fibrations}

\begin{document}

\begin{abstract}
We give a categorical account of algebraic fibrations being preserved under certain dependent product.
This generalizes work by Coquand \etal.
\end{abstract}

\maketitle

\tableofcontents


\section{Elements of abstract homotopy theory} 

Let $(\catE, \otimes, \unit)$ be a symmetric monoidal category, which we consider fixed throughout this section. 

\begin{definition} An \emph{interval} in $\catE$ is a tuple $\interval = (\interval, c, \intervall, \intervalr)$ consisting of  an object $\interval \in \catE$, 
and morphisms $\intervall, \intervalr : \unit \to \interval$ and $\intervalc : \interval \to \unit$,   such that the following diagrams commute:
\[
\xymatrix{
\unit \ar[r]^\intervall \ar[dr]_{\id_\unit} & \interval \ar[d]^-{c} & \unit \ar[dl]^{\id_\unit} \ar[l]_{\intervalr}  \\
 & \unit & }
 \]
\end{definition}

Let us now fix an interval $\interval = (\interval, c, \intervall, \intervalr)$ in $\catE$. 



\begin{definition}
\label{def:homotopy}
Let $f, g \co A \to B$ be morphisms in $\catE$. A \emph{homotopy} $h$ from $f$ to $g$, denoted $h : f \sim g$, is a morphism $h : \interval \otimes A \to B$ such that the following diagrams commute:
\[
\xymatrix@C=1.2cm{
A \ar[r]^-{\intervall \otimes A} \ar[dr]_{f} & \interval \otimes A \ar[d]^{h} & A \ar[dl]^{g} \ar[l]_-{r \otimes A}  \\
 & B & }
 \]
\end{definition}




\begin{definition}
\label{def:homotopy-equivalence}
A map $f : A \to B$ is called a \emph{left (right) homotopy equivalence} if there exist $g \co B \to A$ and homotopies $h \co \id_A \sim g \cc f$ and $k \co
\id_B \sim f \cc g$ (respectively $h \co g \cc f \sim \id_A$ and $k \co f \cc g \sim \id_B$). Such a left (right) homotopy equivalence is said to be \emph{strong} if the
following diagram commutes:
\[
\xymatrix{
\interval \otimes A \ar[r]^{\interval \otimes f } \ar[d]_{h} & \interval \otimes B \ar[d]^{k} \\
A \ar[r]_{f} & B}
\]
and it is said to be \emph{co-strong} if  the following diagram commutes:
\[
\xymatrix{
\interval \otimes B \ar[r]^{\interval \otimes g } \ar[d]_{k} & \interval \otimes A \ar[d]^{h} \\
B \ar[r]_{g} & A \, .}
\]
%
%A \emph{deformation retract} is a homotopy equivalence as above where the homotopy $h$ is trivial (note that this makes $f$ and $g$ into a section-retraction pair).
%Dually, a \emph{co-deformation retract} has the homotopy $k$ trivial (with $g$ and $f$ a section-retraction pair).
\end{definition}

\begin{remark} The notion of homotopy equivalence is symmetric and admits an evident duality, and a homotopy equivalence is strong if 
and only if its dual is co-strong. 
\end{remark}


\begin{remark}
The notion of a left or right strong homotopy equivalence is a generalization of the notion of a strong deformation retract, which is obtained by requiring also
that the homotopy $h$ is trivial.
\end{remark} 


We wish to give an alternative characterisation of strong homotopy equivalences, which will be useful to establish some of their closure properties. 
For this, let us assume also that $\catE$ is finitely cocomplete. Recall from~\cite[Section 4]{riehl-verity:reedy} that, given $f \co A \to B$ and $g \co C \to D$, their \emph{pushout product} is the arrow $f \hatotimes g$ fitting in the following pushout diagram:
\[
\xymatrix{
A \otimes C \ar[r]^{A \otimes g}  \ar[d]_{f \otimes C} & A \otimes D \ar@/^1em/[ddr]^{f \otimes D} \ar[d] & \\ 
B \otimes C \ar@/_1em/[drr]_{B \otimes g} \ar[r] & \bullet \ar[dr]^-(.35){f \hatotimes g}  & \\ 
 & & B \otimes D} 
 \]
This operation extends to a bifunctor  $\catE^{\to} \times \catE^{\to} \to \catE^{\to}$, which equips the arrow category of $\catE$ with a symmetric monoidal structure, with unit the canonical map $\hatunit : 0 \to \unit$. We write $\theta$ for the following commutative square, which will play an important role in  our development:
\begin{equation}
\label{trivial-square}
\begin{gathered}
\xymatrix@C+2em{
  0
  \ar[r]^{\hatunit}
  \ar[d]_{\hatunit}
&
  \unit
  \ar[d]^{\intervalr}
\\
  \unit
  \ar[r]_{\intervall}
&
  \interval
}
\end{gathered}
\end{equation}
This square gives us two maps in the arrow category: 
\[
\thetal : \hatunit \Rightarrow \intervalr  \, , \quad \thetar : \hatunit \Rightarrow \intervall \,. 
\]
Using the square $\theta$, we provide the following  characterization of strong homotopy equivalences.

\begin{lemma}
\label{strong-h-equiv-as-section}
Let $f \co A \to B$ be a morphism in $\catE$.
\begin{enumerate}[(i)]
\item $f$ is a strong left homotopy equivalence if and only if $\thetal \hatotimes f \co f \Rightarrow \intervalr \hatotimes f$ is a section.
\item $f$ is a strong right homotopy equivalence if and only if $\thetar \hatotimes f \co f \Rightarrow  \intervall \hatotimes f$ is a section.
\end{enumerate}
\end{lemma}

\begin{proof}
By duality, it suffices to exhibit the equivalence in (i). To say that $\thetal \hatotimes f : f \to \intervalr \hatotimes f$ is a section means that
there is retraction $\rho$, as follows:
\[
\xymatrix@C+1em{
  f
  \ar[r]^-{\thetal \hatotimes f}
  \ar[dr]_{\id_f} &   \intervalr \hattimes f \ar[d]^{\rho} \\
&   f
}
\]
First, standard diagram-chasing shows that giving $\rho \co \intervalr \hattimes f \Rightarrow f$ is equivalent  to giving maps $h : \interval \otimes A \to A$, $g : B \to A$, and $k : \interval \otimes B \to B$ such that the following diagrams commute:
\begin{equation}
\label{equ:first-three}
\xycenter{
A \ar[r]^-{\intervalr \otimes A}  \ar[d]_f & \interval \otimes A \ar[d]^{h} \\
B \ar[r]_{g} & A}  \qquad
\xycenter{
B \ar[r]^-{\intervalr \otimes B} \ar[d]_g & \interval \otimes B \ar[d]^{k} \\
A \ar[r]_f & B} \qquad
\xycenter{ 
\interval \otimes A \ar[d]_h \ar[r]^{I \otimes f} & \interval \otimes B \ar[d]^k \\
A \ar[r]_{f} & B }
\end{equation}
Secondly, requiring that $\rho$ is a section to $\theta \hattimes f$ means that the diagrams
\begin{equation}
\label{equ:second-two}
\xycenter{
A \ar[r]^-{\intervall \otimes A} \ar[dr]_{\id_A} & \interval \otimes A \ar[d]^h \\ 
 & A } \qquad
 \xycenter{
 B \ar[r]^-{\intervall \otimes B}  \ar[dr]_{\id_B} & \interval \otimes B \ar[d]^{k} \\
  & B} 
\end{equation}
commute. With reference to \cref{def:homotopy-equivalence}, the equations in~\eqref{equ:first-three} provide right endpoint for $h$, 
right endpoint for $k$, and strength for $h$, respectively; while the equations in~\eqref{equ:second-two} provide left endpoints for~$h$ and~$k$, respectively.
\end{proof}

\cref{strong-h-equiv-as-section} entails the following closure properties of strong homotopy equivalences, which are obtained working entirely at the level of arrow categories.

\begin{proposition}
\label{strong-h-equiv-closed-under-monoidal-prod}
If either $f$ or $g$ is a left (respectively, right) strong homotopy equivalence, then so is $f \hatotimes g$.
\end{proposition}

\begin{proof}
Apply \cref{strong-h-equiv-as-section} and use that functors (in this case the Leibniz monoidal product in one variable) preserve sections.
\end{proof}

\begin{proposition}
\label{strong-h-equiv-closed-under-retract}
Left or right strong homotopy equivalences are closed under retracts.
\end{proposition}

\begin{proof}
Use \cref{strong-h-equiv-as-section},  that functors preserve sections, and that  sections are closed under retracts.
\end{proof}

\section{Uniform liftings}

For this section, fix a category $\catE$. Given a set of morphisms $\cal{A} \subseteq \catE^\to$, we 
write $\liftr{\cal{A}}$ to be the class of morphisms of $\catE$ that have 
the right lifting property with respect to all the morphisms in~$\cal{A}$. Dually, we write $\liftl{\cal{A}}$ for the class of morphisms of $\catE$ that have the left lifting
property with respect to all the morphisms of $\cal{A}$. These operations determine a Galois connection $\liftr{\brarghole} \dashv \liftl{\brarghole}$ between the poset of subsets of arrows in $\catE$ and its opposite. Furthermore, these operations enjoy several properties that are useful in developing homotopical algebra.

\medskip

In~\cite{garner:small-object-argument} Richard Garner has shown how to extend this to an adjunction between categories of arrows:
\begin{equation}
\label{garner-adjunction}
\begin{gathered}
\xymatrix@C+2em{
  \CAT/\catE^{\to}
  \ar@<5pt>[r]^-{\liftl{\brarghole}}
  \ar@{}[r]|-{\bot}
&
  (\CAT/\catE^{\to})^{\op}
  \ar@<5pt>[l]^-{\liftr{\brarghole}}
}
\end{gathered}
\end{equation}
Here, instead of starting from a subset of $\catE^\to$, we consider a category $\cal{A}$, to be thought of an indexing category, and a functor $U \co \cal{A} \to \catE^\to$, which assigns an arrow $U a$ in $\catE$ to each index $a \in \cal{A}$. After reviewing this adjunction, we establish some analogues of well-known properties of the orthogonality relation in the extended setting, which will be useful in the following.
 
 
 \begin{definition} Let $U \co \cal{A} \to \catE^\to$ be a functor and $g \co C \to D$ a map in $\catE$. 
 A \emph{right lifting structure} on $g \co C \to D$ with respect to $U$ is 
 a function  $\phi$ that assigns to each $a \in \cal{A}$ and commuting square
\[
\xymatrix@C=2cm{
A \ar[r]^{h}   \ar[d]_{U a} & C \ar[d]^g \\
B \ar[r]_{k} & D}
\]
a diagonal filler $\phi(a, h, k) \co B \to D$, satisfying the following condition: for every $\sigma \co a \to a'$ in $\cal{A}$, 
with image under $U$ given by
\[
\xymatrix{
A \ar[r]^s \ar[d]_{Ua} & A' \ar[d]^{U a'}  \\
B \ar[r]_{t} & B'}
\]
we have that $\phi(a', h, k) \cc t = \phi(a, hs, kt)$, \ie the inner triangle in the diagram
\[
\xymatrix@C=2cm@R=1.5cm{
A \ar[r]^s \ar[d]_a & A' \ar[r]^{h}  & C \ar[d]   \\
B \ar[r]_{t}  \ar[urr]^{\phi(a, hs, k t) \quad } & B'  \ar[r]_k  \ar[ur]_{\phi(a', h, k)} & D }
\]
commutes. 
\end{definition}
 
 Using this notion, we recall the definition of the action on objects of the right adjoint in~\eqref{garner-adjunction}. 
 Given $U \co \cal{A} \to \catE^\to$, we define the category $\liftr{\cal{A}}$ and the functor 
  $\liftr{U} \co \liftr{\cal{A}} \to \catE^\to$ as follows. The objects of
$ \liftr{\cal{A}}$ are pairs $(g, \phi)$ consisting of an arrow $g \co C \to D$ and a right lifting structure for $g$.
The arrows $\alpha \co (g, \phi) \to (g', \phi')$ are squares $\alpha \co g \Rightarrow g'$ in $\cal{A}$ satisfying an appropriate compatibility condition
with respect to the right lifting structures. The functor $\liftr{U} \co \liftr{\cal{A}} \to \catE^\to$ in then given by
the evident forgetful functor. The left adjoint in~\eqref{garner-adjunction} is defined analogously, using the
notion of a left lifting structure.

\medskip

In the remainder of this section, we extend some useful facts about orthogonality operations to orthogonality functors.


\begin{lemma}
Consider a natural transformation between categories over $\catE^{\to}$:
\[
\xymatrix{
  \cal{A}
  \rrtwocell_G^F{\sigma}
 \ar[dr]_{U}
&&
  \cal{B}
  \ar[dl]^{V}
\\&
  \catE^{\to}
}
\]
Note that this includes the condition $V \sigma = \id_U$.
Then $\liftr{F} = \liftr{G}$ and $\liftl{F} = \liftl{G}$, 
\begin{mathpar}
\xymatrix{
  \liftr{\cal{A}}
  \ar[dr]_{\liftr{U}}
&&
  \liftr{\cal{B}}
  \lltwocell_{\liftr{F}}^{\liftr{G}}{=}
  \ar[dl]^{\liftr{V}}
\\&
  \catE^{\to}
}
\and
\xymatrix{
  \liftl{\cal{A}}
  \ar[dr]_{\liftl{U}}
&&
  \liftl{\cal{B}}
  \lltwocell_{\liftl{F}}^{\liftl{G}}{=}
  \ar[dl]^{\liftl{V}}
\\&
  \catE^{\to}
}
\end{mathpar}
\end{lemma}

\begin{proof} The image of $(g, \psi) \in \liftr{\cal{B}}$ under $\liftr{F}$ is $(g, \psi_F)$ and its
image under $\liftr{G}$ is~$(g, \psi_G)$. But the functions $\psi_F$ and $\psi_G$ coincide since, for
every $a \in \cal{A}$, we have that $\sigma_a \co VFa \Rightarrow VGa$ is the identity square on $Ua$. 
By the naturality condition for $\psi$, applied to the diagram 
\[
\xymatrix{
A \ar[r]^{\id_A} \ar[d]_{VFa}  & A \ar[d]^{VGa} \ar[r]^{h}  & C \ar[d]^g \\
B \ar[r]_{\id_B} & B \ar[r]_{k} & D \, ,}
\]
we have  that $\psi_F(a, h, k) = \psi_G(a, h, k)$, as required.
\end{proof} 

\medskip

We now consider the effect of adjoint functors on orthogonality. In the standard setting, it is well known that if 
we have classes of maps $\cal{A} \subseteq \cal{E}^\to$ and $\cal{B} \subseteq \cal{F}^\to$ and an adjunction
\[
\xymatrix@C+1em{
  \cal{E}
  \ar@<5pt>[r]^{F}
  \ar@{}[r]|{\bot}
&
  \cal{F}
  \ar@<5pt>[l]^{G}
}
\]
then $F(\cal{A}) \subseteq \liftl{\cal{B}}$ if and only if $\cal{A} \subseteq G(\cal{B})$. Our next lemma provides the counterpart of this fact in our setting.




\begin{lemma} \label{lift-of-adjunction} 
Let $U : \cal{A} \to \cal{E}^{\to}$ and $V : \cal{B} \to \cal{F}^{\to}$ be functors and consider an adjunction
\[
\xymatrix@C+1em{
  \cal{E}
  \ar@<5pt>[r]^{F}
  \ar@{}[r]|{\bot}
&
  \cal{F}
  \ar@<5pt>[l]^{G}
}
\]
Then, the following are equivalent:
\begin{enumerate}[(i)] 
\item the  functor $F \co \cal{E}^\to \to \cal{F}^\to$ extends to a functor $F' \co \cal{A} \to \liftl{\cal{B}}$ making the following diagram commute:
\[
\xymatrix@C=1.2cm{
  \cal{A}
  \ar[r]^{F'}
  \ar[d]_{U}
&
  \liftl{\cal{B}}
  \ar[d]^{\liftl{V}}
\\
  \cal{E}^{\to}
  \ar[r]_-{F}
&
  \cal{F}^{\to}\, ,}
\]
\item the functor $G \co \cal{F}^\to \to \cal{E}^\to$ extends to a functor $G' \co \cal{B} \to \liftr{\cal{A}}$, making the following diagram commute:
\[
\xymatrix{
  \liftr{\cal{A}}
  \ar[d]_{\liftr{U}}
&
  \cal{B}
  \ar[l]_{G'} 
  \ar[d]^{V}
\\
  \cal{E}^{\to}
&
  \cal{F}^{\to}
  \ar[l]^{G}
}
\]
\end{enumerate}
\end{lemma}

\begin{proof} Giving a functor $F' \co \cal{A} \to \liftl{\cal{B}}$ as above is the same thing as giving fillers for squares of the form
\[
\xymatrix{
FA \ar[d]_{FUa} \ar[r] & C \ar[d]^{Vb} \\
FB \ar[r] & D }
\]
natural in $a  \in \cal{A}$ and $b \in \cal{B}$. Similarly, giving a functor $G' \co \cal{B} \to \liftl{\cal{A}}$ as above is the same thing as giving fillers for squares 
of the form
\[
\xymatrix{
A \ar[d]_{Ua} \ar[r] & GC \ar[d]^{GVb} \\
B \ar[r] & GD }
\]
 natural in $a \in \cal{A}$ and $b \in \cal{B}$. Since $F \dashv G$, these situations coincide.
\end{proof}

\medskip


We now consider slicing. In the classical setting it is well-known that the right orthogonality operation commutes with slicing, while the left orthogonality operation commutes with coslicing.  In order to provide a counterpart of this fact in our setting, we need some auxiliary definitions. Given a functor $U : \cal{A} \to \catE^{\to}$ and $X \in \catE$.  we define the category $\cal{A}/X$
and a functor $U/X \co \cal{A}/X \to (\cal{E}/X)^\to$ as follows. The category $\cal{A}/X$ has as objects pairs consisting of an object $a \in \cal{A}$ and a commutative triangle of the form
\[
\xymatrix{
A \ar[dr] \ar[rr]^{Ua} & & B  \ar[dl] \\
 & X }
 \]
The functor $U/X$ sends such a pair to $Ua \co A \to B$, viewed as a morphism in $\cal{E}/X$. This category fits into the
following pullback diagram:
\[
\xymatrix{
  \cal{A}/X
  \ar[r]
  \ar[d]_{U/X}
  \pullback{dr}
&
  \cal{A}
  \ar[d]^{U}
\\
  (\catE/X)^{\to}
  \ar[r]
&
  \catE^{\to}
}
\]
where we used the functor on arrow categories induced by $\catE/X \to \catE$ forgetting the slicing information.  Dually, taking the strict pullback along the map on arrows induced by the forgetful functor $X/\cal{E} \to \catE$ constructs the \emph{coslice} over $X$:
\[
\xymatrix{
  X/\cal{A}
  \ar[r]
  \ar[d]_{X/U}
  \pullback{dr}
&
  \cal{A}
  \ar[d]^{U}
\\
  (X/\catE)^{\to}
  \ar[r]
&
  \catE^{\to}
}
\]
which also admits an explicit description dual to the one given above for $\cal{A}/X$. With these definitions in place, we can now state the counterpart in our setting of the familiar commutation between slicing and orthogonality operations. 



\begin{lemma} \hfill 
\label{pitchfork-slicing}
\begin{enumerate}[(i)]
\item The right orthogonality functor commutes with slicing, \ie for every $U \co \cal{A} \to \cal{E}$, we have
\[
  (\liftr{\cal{A}})/X = \liftr{(\cal{A}/X)}
\]
as categories over $\cal{E}^\to$.
\item The left orthogonality functor commutes with coslicing, \ie for every $U \co \cal{A} \to \cal{E}$, we have
\[
 \liftl{\cal{A}} \backslash X = \liftl{\cal{A} \backslash X}
\]
as categories over $\cal{E}^\to$.
\end{enumerate}
\end{lemma}

\begin{proof} We only consider (i). The claim follows by unfolding definitions, but we describe the objects of the category explicitly for clarity. They are given by 
tuples consisting of an arrow in~$\cal{E}/X$, 
\[
\xymatrix{
C \ar[dr] \ar[rr]^g  &  & D \ar[dl] \\
 & X & }
 \]
and a function $\phi$ that assigns a diagonal filler to every diagram in $\cal{E}$ of the form
\[
\xymatrix{
A \ar[r] \ar[d]_{Ua} & C \ar[d]^g \\
B \ar[r] & D}
\]
where $a \in \cal{A}$, subject to a uniformity condition. 
\end{proof}

\medskip

Next, we consider the interaction between the orthogonality functors and closure under retracts. In the ordinary setting, it is well-known that
applying the left (or right) orthogonality operation to a class of morphisms produces the same result as applying it to its retract closure. 
In order to establish a counterpart of this fact, we need again some definitions. 
Given a  functor $U : \cal{A} \to \catE^{\to}$, we define its retract closure $\overline{U} : \overline{\cal{A}} \to \catE^{\to}$ as follows. 
An object of $\overline{\cal{A}}$ is a tuple~$(a, e, \sigma, \tau)$ consisting of an object $a \in \cal{A}$, an arrow $e \in \cal{E}^\to$ together with squares $\sigma \co e \Rightarrow Ua$ and $\rho \co Ua \Rightarrow e$,
which exhibit $e$ as a retract of $U a$ in  $\catE^{\to}$,  \ie such that $\sigma \cc \rho = \id_e$. 
A morphism $(f, \kappa) \co (a, e, \sigma, \tau) \to (a', e', \sigma', \tau')$ of $\overline{\cal{A}}$  consists of a morphism $f \co a \to a'$ in $\cal{A}$ and a square $\kappa \co e \Rightarrow e'$  such that the following diagram in $\cal{E}^\to$ commutes:
\[
\xymatrix{
  e
  \ar[r]^{\sigma}
    \ar[d]_{\kappa}
&
  U a
  \ar[r]^{\rho}
  \ar[d]^{U f}
&
  e
  \ar[d]^{\kappa}
\\
  e'
  \ar[r]_{\sigma'}
&
  Ua'
  \ar[r]_{\rho'}
&
  e' \, .
}
\]
The functor $\overline{U} \co \overline{\cal{A}} \to \catE^\to$ is then defined  on objects  by letting $\overline{U}(a, e, \sigma, \tau) \defeq e$,
and on morphisms by letting $\overline{U}(f, \kappa) \defeq \kappa$. The operation of retract closure gives a monad: for $U : \cal{A} \to \catE^{\to}$,
the components of the multiplication and the unit, 
\[
\mu_\cal{A} \co \overline{\overline{\cal{A}}} \to \overline{\cal{A}} \, , \quad
\eta_\cal{A} \co \cal{A} \to \overline{\cal{A}} \, ,
\]
are defined by letting
\[
\mu_\cal{A}((a, e, \sigma,  \rho), e', \sigma', \rho') \defeq (a, e', \sigma \cc \sigma', \rho' \cc \rho) \, , \quad
\eta_\cal{A}(a) \defeq (a, Ua, \id_{Ua}, \id_{Ua}) \, .
\]




\begin{lemma}
\label{retract-closure}
The orthogonality functors send the components of the unit and multiplication of the retract closure monad into natural
isomorphisms, and so for every $U \co \cal{A} \to \catE^\to$, we have isomorphisms of categories
\begin{gather*} 
 \liftr{(\overline{\cal{A}})} \iso \liftr{\cal{A}} \, , \quad
 \liftr{(\overline{\overline{\cal{A}}})} \iso \liftr{\overline{\cal{A}}}  \qquad
 \liftl{(\overline{\cal{A}})} \iso \liftl{\cal{A}} \, , \quad
 \liftl{(\overline{\overline{\cal{A}}})} \iso \liftl{\overline{\cal{A}}}
\end{gather*} 
over $\catE^\to$. \qed
\end{lemma}




\begin{remark} Let $\ret$ denote the \emph{walking retract}, \ie the category with objects $\retA, \retB$ and morphisms generated by $s : \retA \to \retB$ and $r : \retB \to \retA$ under the relation $r \cc s = \id_{\retA}$. The retract closure of $U \co \cal{A} \to \catE^\to$ fits into the following diagram, involving strict pullback and left composition:
\[
\xymatrix@C+1em{
  \overline{\cal{A}}
  \ar[r]
  \ar[d]
  \ar@/_2em/[dd]_{\overline{U}}
  \pullback{dr}
&
  \cal{A}
  \ar[d]^{U}
\\
  (\catE^{\to})^{\ret}
  \ar[r]^-{(\catE^{\to})^{\retB}}
  \ar[d]^{(\catE^{\to})^{\retA}}
&
  \catE^{\to}
\\
  \catE^{\to}
}
\]
The unit of the monad is formally induced by $(\catE^{\to})^{\canonical} : \catE^{\to} \to (\catE^{\to})^{\ret}$ being a section to $(\catE^{\to})^{\retB}$.
\end{remark}


\begin{remark}
\label{retract-closure-slicing}
Taking the retract closure commutes with slicing and coslicing.
\end{remark}

\medskip

We conclude this section by considering the interaction between the orthogonality functors and  Kan extensions.




\begin{lemma} Let $F \co \cal{A} \to \cal{B}$ be a fully faithful functor. 
\label{kan-extension-closure}
\begin{enumerate}[(i)]
\item Assuming that the pointwise left Kan extension of 
$U \co \cal{A} \to \catE^{\to}$ along $F$ exists
\[
\xymatrix{
  \cal{A}
  \ar[dr]_{U}
  \ar[rr]^{F}
&&
  \cal{B}
  \ar[dl]^{\Lan_F U}
\\&
  \catE^{\to}
}
\]
then the functor $\liftr{F} \co \liftr{\cal{B}} \to \liftr{\cal{A}}$,  fitting in the diagram
\[
\xymatrix{
  \liftr{\cal{A}}
  \ar[dr]_{\liftr{U}}
&&
  \liftr{\cal{B}}
  \ar[ll]_{\liftr{F}}
  \ar[dl]^{\liftr{(\Lan_F U)}}
\\&
  \catE^{\to}
}
\]
is an isomorphism.
\item Assuming that the pointwise right Kan extension of 
$U \co \cal{A} \to \catE^{\to}$ along $F$ exists
\[
\xymatrix{
  \cal{A}
  \ar[dr]_{U}
  \ar[rr]^{F}
&&
  \cal{B}
  \ar[dl]^{\Ran_F U}
\\&
  \catE^{\to}
}
\]
then the functor $\liftl{F} \co \liftl{\cal{B}} \to \liftl{\cal{A}}$, fitting in the diagram
\[
\xymatrix{
  \liftl{\cal{A}}
  \ar[dr]_{\liftl{U}}
&&
  \liftl{\cal{B}}
  \ar[ll]_{\liftl{F}}
  \ar[dl]^{\liftl{(\Ran_F U)}}
\\&
  \catE^{\to}
}
\]
is an isomorphism. \qed
\end{enumerate}
\end{lemma}


\subsection*{Small generation of right orthogonality classes}

We now study the question of when different $\cal{I}$ determine the same class of right maps. Fo this, we restrict our
attention to  presheaves on a category and assume $\catE = \hat{\cat{C}}$, where $\catC$ is some small category.
Our intention is to apply \cref{kan-extension-closure} to full subcategories of $\catE_{\cart}^{\to}$, the arrow category $\catE$ with cartesian squares as morphisms. We need a lemma.

\begin{lemma}
\label{left-kan-extension-of-representables}
Let $\cal{B}$ be a full subcategory of $\catE_{\cart}^{\to}$ closed under base change to representables.
Let $\cal{A}$ denote its restriction to arrows into representables.
\[
\xymatrix{
  \cal{A}
  \ar[rr]
  \ar[dr]
&&
  \cal{B}
  \ar[dl]
\\&
  \catE^{\to}
}
\]
Then, the inclusion $\cal{B} \to \catE^{\to}$ is the left Kan extension of $\cal{A} \to \catE^{\to}$ along $\cal{A} \to \cal{B}$.
\end{lemma}


\begin{proof}
Since $\catE^{\to}$ is cocomplete, we can use the colimit formula for left Kan extensions to verify the claim.
All of the following will be functorial in an object $f \co X \to Y$ of $\cal{B}$.
We consider the diagram indexed by cartesian squares
\[
\xymatrix{
  U
  \ar[r]
  \ar[d]_{h}
  \pullback{dr}
&
  X
  \ar[d]^{f}
\\
  \hom(\arghole, M)
  \ar[r]
&
  Y
}
\]
with $h \in \cal{A}$ and valued $h$.
Our goal is to show that its colimit in $\catE^{\to}$ is $f$.
Using the assumption that $\cal{B}$ is closed under base change to representables, this is equivalently the diagram indexed by representables $s : \hom(\arghole, M) \to Y$ and valued $s^* i$.
Generalized to this level, the statement $\colim_{s : \hom(\arghole, M) \to Y} s^* f \simeq f$ holds since base change commutes with colimits and 
$\colim_{s : \hom(\arghole, M) \to Y} \hom(\arghole, M) \simeq Y$.
\end{proof}


\begin{question}
There should be an abstract argument here cleverly combining the codomain fibration and the corresponding left Kan extension claim for the codomain part
\[
\xymatrix{
  \cat{C}
  \ar[rr]^{y}
  \ar[dr]_{y}
&&
  \hat{\catC}
  \ar[dl]^{\id}
\\&
  \hat{\cat{C}}
}
\]
which holds by the co-Yoneda lemma.
How does it go?
\end{question}



\begin{proposition}
\label{awfs-on-arrows-into-representables}
Let $\cal{B}$ be a full subcategory of $\catE_{\cart}^{\to}$ closed under base change to representables.
Let $\cal{A}$ denote its restriction to arrows into representables.
\[
\xymatrix{
  \cal{A}
  \ar[rr]
  \ar[dr]
&&
  \cal{B}
  \ar[dl]
\\&
  \catE^{\to}
}
\]
Then $\liftr{\cal{A}} = \liftr{\cal{B}}$.
\end{proposition}

\begin{proof} The result follows by combining \cref{left-kan-extension-of-representables} and part~(i) of \cref{kan-extension-closure}. 
\end{proof}



\begin{example}\label{monos-into-representables} \label{decidable-monos-into-representables}
We apply the results above to simplicial sets. We say that a monomorphism $i \co A \to B$ is 
 \emph{decidable} if for every $n$, the function $i_n : A_n \to B_n$ has a decidable image. 
 The class of decidable monomorphisms is closed under base change. Define 
 \[
\cal{B}  = \braces{ i \co A \rightarrow B \ | \ i  \text{ is  decidable monomorphism } }
\]
We call an object of  $\liftr{\cal{B}}$ a \emph{uniform trivial Kan fibration}. This will be our counterpart of the
 classical notion of a trivial Kan fibration, which is defined by right orthogonality with respect to arbitrary monomorphisms. 
Classically, the class of trivial Kan fibrations can be characterized also as being the right orthogonal class to the
set of boundary inclusions $i^n : \partial \Delta^n \to \Delta^n$. Analogously, in our setting, the category of uniform trivial uniform
Kan fibrations can also be characterized as the right orthogonal category of  a small category. Indeed, by  \cref{awfs-on-arrows-into-representables} we have that $\liftr{\cal{A}}  = \liftr{\cal{B}}$ where
 \[
 \cal{A} = \braces{i \co A \rightarrow \Delta^{n} \ | \ i \text{ is a  decidable monomorphism} } \, .
 \]
In fact, for every full subcategory $\cal{S} \subseteq \calB$ containing $\cal{A}$ we have that $\liftr{\cal{B}} = \liftr{\cal{S}}$,
since $\cal{A}$ is the restriction to maps into representables  of $\cal{B}$. For example, we might consider an increasing sequence of choices,
$\cal{A} \subseteq \cal{A}_1 \subseteq \cal{A}_2 \subseteq \cal{B}$, 
where 
\[ 
\cal{A}_1  = \braces{A \hookrightarrow \Delta^{n_1} \times \ldots \times \Delta^{n_k}} \,  \qquad  
\cal{A}_2  = \braces{A \hookrightarrow B \mid \text{$B$ finite and finite-dim.}} \, . 
\]
and we have
\[
\cal{A} ... 
\]
One reason for considering these alternatives is that they have different closure properties. 

In the next section, we will show that, classically, 
a map $p \co X \to Y$ of simplicial sets admits the structure of a uniform Kan fibration if and only if it is a trivial Kan fibration in the usual sense.
Note that this cannot be proved using~\cref{awfs-on-arrows-into-representables}, as the class of boundary inclusions  is contained strictly 
in~$\cal{A}$. 
\end{example}




\section{Uniform Kan fibrations}



Recall the notion of adhesive morphisms~\cite{garner-lack:adhesive}. Fix now an interval $\interval = (\interval, \intervall, \intervalr)$. 
The expression $\braces{\intervall, \intervalr}$ denotes the inclusion $1 + 1 \to \catE^{\to}$ valued in $\intervall$ and $\intervalr$.


\medskip

Let $U : \cal{A} \to \catE^{\to}$ be a subcategory of adhesive morphisms in $\catE$ with morphisms given by cartesian squares.
Assume the subcategory $\cal{A}$ is closed under the monoidal operations of $\catE^{\to}$, \ie that $(\cal{A}, \hatunit, \hatotimes)$ is itself a monoidal category and $U$ preserves the monoidal structure on the nose. Recall that \emph{$\cal{A}$-map} is a map $f \co X \to Y$ equipped with a right lifting structure with respect to $\cal{A}$.

\medskip


Define $\cal{A}_\interval \defeq \cal{A} + \cal{A}$ and the functor
\[
U_\interval \co \cal{A}_\interval \to \cal{E}^\to 
\]
as the copair of the functors mapping $a \in \cal{A}$ to $\intervall \hatotimes U(a)$ and $\intervalr \hatotimes U(a)$, respectively. 

\begin{definition} An \emph{uniform $\cal{A}$-fibration} is an $\cal{A}_\interval$-map.
\end{definition} 


We now illustrate what these notions are in simplicial sets and show that they are equivalent to the standard notions. The rationale for omitting higher dimensional horns is that those (at least in bare form) are indirectly included as retracts of one dimensional horns by Leibniz product with certain subobjects of representables. 

\begin{lemma} Let $p \co X \to Y$ be a map in $\cal{E}$. The following are equivalent.
\begin{enumerate}[(i)]
\item $p$ admits a $\cal{J}$-algebra structure,
\item $\hatexp(\intervall, p)$ and $\hatexp(\intervalr, p)$ admit $\cal{I}$-algebra structures.
\end{enumerate} 
Thus, by definition, a map $p$ is an $\cal{I}$-fibration exactly if $\hatexp(\intervall, p)$ and $\hatexp(\intervalr, p)$ are $\cal{I}$-trivial fibrations.
\end{lemma} 



We compare with the classical notions. For this, we introduce an auxiliary definition. A \emph{regular trivial fibration} is a map $p : X \to Y$ with designated fillers $d$ for squares $i^n \to p$ such that whenever the square factors as shown below,
\[
\xymatrix{
  \partial \Delta^n
  \ar[r]
  \ar[d]^{i^n}
&
  \Delta^{n-1}
  \ar[r]
  \ar[d]^{\id}
&
  X
  \ar[d]^{p}
\\
  \Delta^n
  \ar[r]_{s_k^{n-1}}
  \ar@{.>}[urr]^(0.3){d}
&
  \Delta^{n-1}
  \ar[r]
&
  Y
}
\]
the composite filler is coherent with respect to the trivial filler in the right square. Regular trivial fibrations are the right class for the algebraic weak factorization system with generating left category having objects $\cal{I}_1 \cup \braces{\id : \Delta^n \to \Delta^n}$ and non-trivial morphisms as above:
\[
\xymatrix{
  \partial \Delta^n
  \ar[r]
  \ar[d]^{i^n}
&
  \Delta^{n-1}
  \ar[d]^{\id}
\\
  \Delta^n
  \ar[r]_{s_k^{n-1}}
&
  \Delta^{n-1}
}
\]

Classically, every ordinary trivial fibration is a regular trivial fibration, simply because we can choose (using the axiom of choice) designated fillers for $i^n \to p$ based on (using excluded middle) whether that square factors through some $s_k^{n-1} : i^n \to \id$.
Note that it does not matter which degeneracy we choose if multiple are available --- the resulting diagonal filler will cohere with all possible choices.

\begin{lemma}
Every regular trivial fibration is an $\cal{I}_2$-trivial fibration.
\end{lemma}

\begin{proof}
For the rest of the proof, fix a regular trivial fibration $p : X \to Y$.
Consider a square $i \to p$ with $i : \cal{I}_2$.
We define a diagonal filler by decomposing $i$ into a finite composition of cobase changes of boundary inclusions, filling each of these according to the previous paragraph.
Crucially, this process is independent of the actual order of the boundary fillings (note that this is not true for the analogous situation of horn fillings).
For each morphism in $\cal{I}_2$ and commuting triangle of squares
\[
\xymatrix{
  A'
  \ar[r]
  \ar[d]
  \pullback{dr}
&
  A
  \ar[d]
  \ar[r]
&
  X
  \ar[d]
\\
  \Delta^{n'}
  \ar[r]
  \ar@{.>}[urr]
&
  \Delta^n
  \ar[r]
  \ar@{.>}[ur]
&
  Y
}
\]
we need to exhibit coherence of fillers as indicated.
By ``vertical'' induction and the remark on order invariance of boundary fillings, it will suffice to study the case where the middle vertical map is a boundary inclusion $i^n : \partial \Delta^n \to \Delta^n$.
Working ``horizontally'', it suffices to study the situation where the map $\Delta^{n'} \to \Delta^n$ is a face or degeneracy map as $\Delta$ is generated by these.

Let us first examine the case of a face operation.
\[
\xymatrix{
  \Delta^n
  \ar[r]
  \ar[d]
  \pullback{dr}
&
  \partial \Delta^{n+1}
  \ar[d]
  \ar[r]
&
  X
  \ar[d]
\\
  \Delta^n
  \ar[r]_{d_k^{n+1}}
  \ar@{.>}[urr]
&
  \Delta^{n+1}
  \ar[r]
  \ar@{.>}[ur]
&
  Y
}
\]
Since the left vertical map is necessarily the identity, the filler for the composite square is uniquely determined, so there is no coherence to be verified.

Let us now examine the case of a degeneracy operation.
\[
\xymatrix{
  2 \times \partial \Delta^n
  \ar[r]
  \ar[d]
  \ar@/^2em/[rr]^(0.3){\pi_2}
  \pullback{dr}
&
  \bigcup_{i \neq k, k+1} \Delta^{[n+1] - i}
  \ar[r]
  \ar[d]
  \pullback{dr}
&
  \partial \Delta^n
  \ar[d]
  \ar[r]
&
  X
  \ar[dd]
\\
  2 \times \Delta^n
  \ar[r]
  \ar@/_2em/[rr]_(0.3){\pi_2}
&
  \partial \Delta^{n+1}
  \ar[r]
  \ar[d]
  \ar@{.>}[urr]
  \pullback{ul}
&
  \Delta^n
  \ar[d]
  \ar@{.>}[ur]
\\&
  \Delta^{n+1}
  \ar[r]_{s_k^n}
  \ar@{.>}[uurr]
&
  \Delta^n
  \ar[r]
  \ar@{.>}[uur]
&
  Y
}
\]
The pullback of the boundary inclusion $\partial \Delta^n \to \Delta^n$ along $s_k^n$ decomposes as a cobase change of two parallel boundary inclusions of dimension $n$ followed by a boundary inclusion of dimension $n+1$ as indicated.
The two parallel boundary fillings are identical copies of the original right square boundary filling, so they cohere as indicated.
Finally, the filling for the boundary inclusion $\partial \Delta^{n+1} \to \Delta^{n+1}$ coheres as indicated by how boundary filling was originally defined for degenerate squares.
\end{proof}











\begin{lemma}
Classically, every ordinary fibration is an $\cal{I}_5$-fibration.
\end{lemma}

\begin{proof}
Let $p : X \to Y$ be an ordinary fibration.
Then $\hatexp(h_k^1, p)$ is an ordinary trivial fibration for $k = 0, 1$.
Classically, it can be made into regular trivial fibration.
By previous lemmata, we then have $\hatexp(h_k^1, p)$ an $\cal{I}_2$-trivial and $\cal{I}_5$-trivial fibration.
But that means $p$ is an $\cal{I}_5$-fibration.
\end{proof}


\section{Strong homotopy equivalences}

\newpage






\section{Stability under pushforward}

\begin{lemma}
\label{lift-dependent-product}
Let $p : Y \to X$ be a map in $\catE$ admitting pullback and pushforward:
\[
\xymatrix@C+1em{
  \catE/X
  \ar@<5pt>[r]^{p^*}
  \ar@{}[r]|{\bot}
&
  \catE/Y
  \ar@<5pt>[l]^{p_*}
}
\]
Let $W : \cat{C} \to \catE^{\to}$ be a category over $\catE^{\to}$.
Then lifts of pushforward
\[
\xymatrix{
  \Slice_X(\liftr{\cat{C}})
  \ar@{.>}[r]
  \ar[d]_{\Slice_X(W)}
&
  \Slice_Y(\liftr{\cat{C}})
  \ar[d]^{\Slice_Y(\liftr{U})}
\\
  (\catE/X)^{\to}
&
  (\catE/Y)^{\to}
  \ar[l]^{(p_*)^{\to}}
}
\]
are in natural correspondence with lifts of pullback
\[
\xymatrix{
  \Slice_X(\cat{C})
  \ar@{.>}[r]
  \ar[d]_{\Slice_X(W)}
&
  \liftl{\Slice_Y(\liftr{\cat{C}})}
  \ar[d]^{\liftl{\Slice_Y(\liftr{U})}}
\\
  (\catE/X)^{\to}
  \ar[r]^{(p^*)^{\to}}
&
  (\catE/Y)^{\to},
}
\]
which in turn correspond to maps from $\liftr{\Slice_Y(W)}$ to $\liftr{((p^*)^{\to} \cc \Slice_Y(W))}$ over $(\catE/Y)^{\to}$.
\end{lemma}

\begin{proof}
Recall from \cref{pitchfork-slicing} that slicing commutes with $\liftr{\brarghole}$.
For the first correspondence, apply \cref{lift-of-adjunction} to the adjunction $p^* \dashv p_*$ with $U = W$ and $V = \liftr{W}$.
The last statement is simply the adjunction~\eqref{garner-adjunction}.
\end{proof}



\bibliographystyle{plain}
\bibliography{../../common/uniform-kan-bibliography}

\end{document}
