\documentclass[reqno,10pt,a4paper,oneside]{amsart}

\usepackage{uniform-kan-prelude}

\title{Dependent Product for Algebraic Fibrations}

\begin{document}

\begin{abstract}
We give a categorical account of algebraic fibrations being preserved under certain dependent product.
This generalizes work by Coquand \etal.
\end{abstract}

\maketitle

\tableofcontents

\section{Algebraic Weak Factorization Systems}

\subsection{Review}

Fix a category $\cat{E}$ for this section.
There is a well known Gallois connection $\liftr{\brarghole} \dashv \liftl{\brarghole}$ between the poset of subsets of arrows in $\cat{E}$ and its opposite.
Garner~\cite{garner:small-object-argument} shows how to extend this to an adjunction between categories of arrows:
\begin{equation}
\label{garner-adjunction}
\begin{gathered}
\xymatrix@C+1em{
  \CAT/\cat{E}^{\to}
  \ar@<5pt>[r]^{\liftl{\brarghole}}
  \ar@{}[r]|{\bot}
&
  (\CAT/\cat{E}^{\to})^{\op}
  \ar@<5pt>[l]^{\liftr{\brarghole}}
}
\end{gathered}
\end{equation}

\subsection{Elementary Properties}

\paragraph{Slicing}

Let $X$ be an object of $\cat{E}$.
Given a category $U : \cat{A} \to \cat{E}^{\to}$ over $\cat{E}^{\to}$, we construct its \emph{slice} over $X$, a category $\Slice_X(U) : \Slice_X(\cat{A}) \to (\cat{E}/X)^{\to}$ over $(\cat{E}/X)^{\to}$ using (strict) pullback:
\[
\xymatrix{
  \Slice_X(\cat{A})
  \ar[r]
  \ar[d]_{\Slice_X(U)}
  \pullback{dr}
&
  \cat{A}
  \ar[d]^{U}
\\
  (\cat{E}/X)^{\to}
  \ar[r]
&
  \cat{E}^{\to}
}
\]
Here, the bottom map is induced by $\cat{E}/X \to \cat{E}$ forgetting the slicing information.

Explicitly, the category $\Slice_X(\cat{A})$ has as objects pairs $(Y, h)$ where $Y : \cat{A}$ and $h$ is a map in $\cat{E}$ from the codomain of $U(Y)$ to $X$.
Dually, (strictly) pulling back along $(\cat{E} \backslash X)^{\to} \to \cat{E}^{\to}$ constructs the \emph{coslice} over $X$.

\begin{remark}
\label{pitchfork-slicing}
Just as in the non-algebraic setting, the functor $\liftr{\brarghole}$ and $\liftl{\brarghole}$ commute (up to natural isomorphism) with slicing and coslicing, respectively.
\end{remark}

\paragraph{Retract closure}

For this paragraph, let $\cat{X}$ abbreviate the arrow category of $\cat{E}$.
Let further $\cat{R}$ denote the \emph{walking retract}, \ie the category with objects $0, 1$ and morphisms generated by $s : 0 \to 1$ and $r : 1 \to 0$ under the relation $r \cc s = \id_0$.

Given a category $U : \cat{A} \to \cat{X}$ over $\cat{X}^{\to}$, we define its retract closure $\overline{U} : \overline{\cat{A}} \to \cat{X}$ using (strict) pullback and left composition:
\[
\xymatrix@C+1em{
  \overline{\cat{A}}
  \ar[r]
  \ar[d]
  \ar@/_2em/[dd]_{\overline{U}}
  \pullback{dr}
&
  \cat{A}
  \ar[d]^{U}
\\
  \cat{X}^{\cat{R}}
  \ar[r]^-{\cat{X}^1}
  \ar[d]^{\cat{X}^0}
&
  \cat{X}
\\
  \cat{X}
}
\]
Explicitly, an object of $\overline{\cat{A}}$ consists of $a : \cat{A}$ and a retract of $U(a)$ in $\cat{X}$, \ie an object $e : \cat{X}$ together with maps $s : e \to U(a)$ and $r : U(a) \to e$ such that $r \cc s = \id_e$:
\[
\xymatrix{
  e
  \ar[r]_{s}
  \ar@/^1em/[rr]^{\id}
&
  U(a)
  \ar[r]_{r}
&
  e
}
\]
The action of $\overline{U}$ on this object is $\overline{U}(a, e, s, t) = e$.
A morphism between such objects $(a, e, s, t)$ and $(a', e', s', t')$ consists of a morphism $f : a \to a'$ in $\cat{A}$ and a morphism $h : e \to e'$ in $\cat{X}$ such that the evident squares commute:
\[
\xymatrix{
  e
  \ar[r]_{s}
  \ar@/^1em/[rr]^{\id}
  \ar[d]_{h}
&
  U(a)
  \ar[r]_{r}
  \ar[d]^{U(f)}
&
  e
  \ar[d]^{h}
\\
  e'
  \ar[r]^{s'}
  \ar@/_1em/[rr]_{\id}
&
  U(a')
  \ar[r]^{r'}
&
  e'
}
\]
The action of $\overline{U}$ on this morphism is $\overline{U}(f, h) = h$.

We have an evident inclusion $\cat{A} \to \overline{\cat{A}}$ of categories over $\cat{X}^{\to}$ formally induced by $\cat{X}^{\canonical} : \cat{X} \to \cat{X}^{\cat{R}}$ being a section to $\cat{X}^1$.
With the explicit description of objects, it maps $a$ to $(a, U(a), \id_{U(a)}, \id_{U(a)})$.

\begin{remark}
\label{retract-closure-slicing}
Taking the retract closure commutes (up to natural isomorphism) with slicing and coslicing.
\end{remark}

\begin{lemma}
\label{retract-closure}
Recall the adjunction~\eqref{garner-adjunction}.
The inclusion $\overline{\cat{A}} \to \cat{A}$ induces functors $\liftl{\overline{\cat{A}}} \to \liftl{\cat{A}}$ and $\liftr{\overline{\cat{A}}} \to \liftr{\cat{A}}$ of categories over $\cat{E}^{\to}$.
These functors are isomorphisms.
\end{lemma}

\begin{proof}
Easy to check.
\end{proof}

\paragraph{Closure under left Kan extension}

Let $U : \cat{A} \to \cat{E}^{\to}$ be a category over $\cat{E}^{\to}$.
Let $F : \cat{A} \to \cat{B}$ be a functor.
Assume the pointwise left Kan extension $\Lan_F U : \cat{B} \to \cat{E}^{\to}$ of $U$ along $F$ exists.
Explicitly, we have $(\Lan_F U)(Y) = \colim_{F(X) \to Y} U(X)$.
\begin{enumerate}
\item
We can construct a functor $\liftr{\cat{A}} \to \liftr{\cat{B}}$.
\item
If $F$ is fully faithful, then $F$ extends to a functor $(\cat{A}, U) \to (\cat{B}, \Lan_F U)$ of categories over $\cat{E}^{\to}$.
By functoriality of $\liftr{\brarghole}$, this induces a functor $\liftr{\cat{B}} \to \liftr{\cat{A}}$.
It is inverse to the functor from the previous point, making it an isomorphism.

\paragraph{Lifts of adjoint functors}

\section{Generalizing to Restricted Lifting Problems}

\subsection{Definitions}

\paragraph{Box category}

\paragraph{Extended Pitchfork Adjunction}

\subsection{Elementary Properties}

\paragraph{Slicing}

\paragraph{Left Retract closure}

\paragraph{Closure under left Kan extension}

\paragraph{Lifts of adjoint functors}

\section{General Facts about Dependent Product}

\subsection{For Lifting Problems}

\subsection{For Restricted Lifting Problems}

\section{Dependent Product for Algebraic Fibrations}

\subsection{The Setting}

\subsection{Trivial Algebraic Fibrations}

Awfs generated by (decidable) subobjects of representables.
Also algebraically free on (decidable) monomorphisms.
TODO: Terminology implies we have a model structure.
Haven't talked about that yet.

\subsection{Algebraic Fibrations}

Awfs generated by Leibniz construction of (decidable) subobjects of representables with interval endpoint inclusions.
Also algebraically free on Leibniz construction of (decidable) monomorphisms with interval endpoint inclusions.

\subsection{Algebraic Fibrations via Composition}

\paragraph{Composition as restricted lifting problem}

Awfs generated by Leibniz construction of (decidable) subobjects of representables with theta squares.
Also algebraically free on Leibniz construction of (decidable) monomorphisms with theta squares.

\paragraph{Connections induce isomorphism of right categories}

Use characterization of connection in terms of interval endpoint inclusions being strong homotopy equivalences.
This implies theta squares are sections in the arrow category.
Use retract closure from first section.

\subsection{Dependent Product for Algebraic Fibrations}

Let pseudo-fibrations be right maps for representables times interval endpoint inclusions.
Also right map for any presheaf times interval endpoint inclusions.
Show that base change along pseudo-fibrations functorially maps theta squares to left retract closures of theta squares.
By earlier elementary lemmata and previous subsection, it follows that Pi along pseudo-fibrations lifts to functor between right categories.
Verify BC.

\bibliographystyle{plain}
\bibliography{../../common/uniform-kan-bibliography}

\end{document}
